{% extends 'base.html' %}

{% block title %}Quiz{% endblock %}

{% block extra_css %}
<style>
    /* Countdown Timer Styling */
    .countdown {
        font-size: 1.5rem;
        font-weight: bold;
    }

    /* Neuromorphic look */
    .neuromorphic {
        background: #f9f9f9; /* Clean white background */
        box-shadow: 8px 8px 20px rgba(0, 0, 0, 0.15), -8px -8px 20px rgba(255, 255, 255, 0.9);
        border-radius: 12px;
        padding: 20px;
    }

    /* Neuromorphic button */
    .neuromorphic-button {
        border-radius: 12px;
        color: #fff;
        font-weight: bold;
        text-align: center;
        padding: 12px;
        transition: all 0.3s ease;
        flex: 1; /* Make buttons equal width */
        margin: 0 5px; /* Gap between buttons */
    }

    /* Previous Button */
    .button-previous {
        background-color: #87cefa; /* Light Sky Blue */
    }

    /* Next Button */
    .button-next {
        background-color: #ffa07a; /* Light Salmon */
    }

    /* Finish Quiz Button */
    .button-finish {
        background-color: #3cb371; /* Medium Sea Green */
    }

    /* Button hover effects */
    .neuromorphic-button:hover {
        opacity: 0.9;
    }

    /* Highlight on button click */
    .neuromorphic-button:active {
        box-shadow: inset 5px 5px 10px rgba(0, 0, 0, 0.2), inset -5px -5px 10px rgba(255, 255, 255, 0.7);
    }

    /* Sticky Finish Quiz Button */
    .sticky-button {
        position: sticky;
        bottom: 0;
        width: 100%;
        text-align: center;
        margin-top: auto; /* Ensures it sticks properly */
    }

    /* Choice highlight */
    label.bg-elegant-green {
        background-color: #4caf50; /* Emerald green */
        color: white; /* White text */
        font-weight: bold; /* Bold text */
        border-color: #388e3c;
    }

    /* Ensure the selected choice does not have shadows */
    label.bg-elegant-green:hover {
        background-color: #4caf50; /* Keep the same emerald green on hover */
        color: white; /* Maintain white text on hover */
    }

    label.border-blue-500 {
        border-width: 2px;
    }

    /* Styles for choices */
    label {
        transition: background-color 0.3s ease, color 0.3s ease;
    }
</style>
{% endblock extra_css %}

{% block content %}
<div class="flex justify-center items-center min-h-screen mt-8">
    <!-- Main Flex Container -->
    <div class="flex w-full max-w-6xl bg-white shadow-md rounded-lg p-6">
        <!-- Main Quiz Content Section -->
        <div class="w-full max-w-4xl bg-gray-50 shadow-md rounded-lg p-6 space-y-6 neuromorphic">
            <!-- Question Box -->
            <div class="neuromorphic">
                <h3 class="text-lg font-semibold mb-3">Question 1:</h3>
                <p class="text-gray-700">What is the capital of France?</p>
            </div>

            <!-- Choices Box -->
            <div class="">
                <h4 class="text-lg font-semibold mb-4">Choices:</h4>
                <div class="space-y-3">
                    <label class="block bg-white border border-gray-200 p-4 rounded-lg shadow-md cursor-pointer hover:bg-gray-100" onclick="selectChoice(this)">
                        <input type="radio" name="question1" value="A" class="mr-2 hidden"> A. Paris
                    </label>
                    <label class="block bg-white border border-gray-200 p-4 rounded-lg shadow-md cursor-pointer hover:bg-gray-100" onclick="selectChoice(this)">
                        <input type="radio" name="question1" value="B" class="mr-2 hidden"> B. London
                    </label>
                    <label class="block bg-white border border-gray-200 p-4 rounded-lg shadow-md cursor-pointer hover:bg-gray-100" onclick="selectChoice(this)">
                        <input type="radio" name="question1" value="C" class="mr-2 hidden"> C. Berlin
                    </label>
                    <label class="block bg-white border border-gray-200 p-4 rounded-lg shadow-md cursor-pointer hover:bg-gray-100" onclick="selectChoice(this)">
                        <input type="radio" name="question1" value="D" class="mr-2 hidden"> D. Madrid
                    </label>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between">
                <button class="neuromorphic-button button-previous">Previous</button>
                <button class="neuromorphic-button button-next">Next</button>
            </div>
        </div>

        <!-- Sidebar for Question Navigation -->
        <aside class="ml-6 bg-white shadow-md rounded-lg p-6 flex-shrink-0 neuromorphic">
            <!-- Quiz Info Section -->
            <div class="mb-6 neuromorphic">
                <h4 class="text-lg font-semibold text-center mb-4">Quiz Info</h4>
                <div class="text-center">
                    <p class="countdown mb-2">Time Left: <span id="time-left">10:00</span></p>
                    <p class="mb-2">Questions Answered: <span id="questions-answered">0</span> / 15</p>
                </div>
            </div>

            <!-- Question Navigation -->
            <h4 class="text-lg font-semibold mb-4 text-center">Questions</h4>
            <ul class="grid grid-cols-5 gap-4">
                <li><a href="#" class="block py-3 px-3 bg-gray-100 border border-gray-200 rounded-lg text-center hover:bg-gray-200">1</a></li>
                <!-- Add other question links similarly -->
            </ul>

            <!-- Finish Quiz Button -->
            <div class="sticky-button">
                <button class="neuromorphic-button button-finish w-full">Finish Quiz</button>
            </div>
        </aside>
    </div>
</div>
{% endblock content %}

{% block extra_js %}
<script>
    // Countdown timer logic
    const timerElement = document.getElementById('time-left');
    let timeLeft = 600; // 10 minutes in seconds

    function updateTimer() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        timerElement.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        
        // Update timer color
        if (timeLeft <= 60) {
            timerElement.style.color = 'red';
        } else if (timeLeft <= 180) {
            timerElement.style.color = 'orange';
        } else {
            timerElement.style.color = 'green';
        }

        if (timeLeft > 0) timeLeft--;
    }

    setInterval(updateTimer, 1000);

    // Choice selection logic
    function selectChoice(element) {
        const choices = element.parentNode.querySelectorAll('label');
        choices.forEach(choice => {
            choice.classList.remove('bg-elegant-green');
            choice.classList.remove('border-blue-500');
        });
        element.classList.add('bg-elegant-green', 'border-blue-500');
    }
</script>
{% endblock extra_js %}
